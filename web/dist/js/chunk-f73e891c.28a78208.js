(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-f73e891c"],{"0a99":function(e,t,n){"use strict";n.r(t);var i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{directives:[{name:"loading",rawName:"v-loading",value:e.screenLoading,expression:"screenLoading"}],staticClass:"container"},[n("el-card",{staticClass:"box-card"},[n("div",{staticStyle:{"font-weight":"900","font-size":"25px"}},[e._v(e._s(e.me.name.length>8?e.me.name.substring(0,8)+"...":e.me.name)+"\n\t\t")]),n("p",{staticClass:"time"},[e._v("\n\t\t\t"+e._s(e.me.count)+" 条内容\n\t\t")]),n("el-divider"),n("p",{staticClass:"time card-bottom"},[e.canReturnBefore?n("i",{staticClass:"el-icon-cold-drink",on:{click:e.showReturnBeforeDialog}},[e._v(" 重生")]):n("i",{staticClass:"el-icon-cold-drink"},[e._v(" 重生已经被禁用")]),n("span",{staticStyle:{"margin-left":"20px"}}),n("i",{staticClass:"el-icon-moon-night",on:{click:e.showRebornDialog}},[e._v(" 转世")])])],1),e._l(e.list,function(t,i){return n("el-card",{staticClass:"box-card"},["normal"===t.type?n("div",[e._v("\n\t\t\t"+e._s(t.content)+"\n\t\t")]):"voice"===t.type?n("div",[n("el-row",[n("el-col",{attrs:{span:3}},[n("i",{directives:[{name:"show",rawName:"v-show",value:e.playing.mid!=t.id,expression:"playing.mid!=v.id"}],staticClass:"el-icon-video-play",on:{click:function(n){return e.play(t,i)}}}),n("i",{directives:[{name:"show",rawName:"v-show",value:e.playing.mid==t.id,expression:"playing.mid==v.id"}],staticClass:"el-icon-circle-close",on:{click:e.stop}})]),n("el-col",{attrs:{span:19}},[n("el-progress",{attrs:{"text-inside":!0,"stroke-width":26,percentage:e.playing.mid===t.id?Math.round(t.played)/Math.round(t.length)*100:0,"show-text":!1}})],1)],1)],1):e._e(),n("p",{staticClass:"time"},[e._v("\n\t\t\t"+e._s(t.name)+" 于 "+e._s(t.create_at)+" 发送\n\t\t\t"),n("br"),n("span",{staticClass:"el-icon-chat-dot-round"},[e._v(e._s(t.c_count?t.c_count:0))]),n("el-divider",{attrs:{direction:"vertical"}}),n("span",{staticClass:"el-icon-sunny"},[e._v(e._s(t.star?t.star:0))]),n("el-divider",{attrs:{direction:"vertical"}}),n("span",{staticClass:"el-icon-heavy-rain"},[e._v(e._s(t.shit?t.shit:0))])],1),n("el-divider"),n("p",{staticClass:"time card-bottom"},[n("i",{staticClass:"el-icon-delete",on:{click:function(n){return e.commitDelete(t)}}},[e._v(" 删除")])])],1)}),n("el-card",{directives:[{name:"show",rawName:"v-show",value:!e.nomore,expression:"!nomore"}],staticClass:"box-card",staticStyle:{"text-align":"center","font-size":"13px",padding:"0"}},[n("span",{on:{click:e.nextPage}},[e._v("\n\t\t\t下一页\n\t\t")])]),n("el-card",{directives:[{name:"show",rawName:"v-show",value:e.nomore,expression:"nomore"}],staticClass:"box-card",staticStyle:{"text-align":"center","font-size":"13px",padding:"0"}},[n("span",{on:{click:e.reload}},[e._v("\n\t\t\t没有更多了，点击重新加载\n\t\t")])]),n("el-dialog",{attrs:{title:"转世",visible:e.reborn.display,width:"80%"},on:{"update:visible":function(t){return e.$set(e.reborn,"display",t)}}},[n("span",[n("p",[e._v("转世之后会重置当前登录状态，并且你将永远失去当前身份。")]),n("p",[e._v("你将会失去当前的全部数据。")]),n("p",[e._v("如果你在加入的时候设置了重生口令，则可以使用重生口令重新回来。")]),n("p",[e._v("或者，你可以就此重新开始。")]),n("p",[e._v("如果决定了，请点击确定。")])]),n("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{on:{click:function(t){e.reborn.display=!1}}},[e._v("取 消")]),n("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.commitReborn()}}},[e._v("确 定")])],1)]),n("el-dialog",{directives:[{name:"loading",rawName:"v-loading",value:e.returnBefore.loading,expression:"returnBefore.loading"}],attrs:{title:"重生",visible:e.returnBefore.display,width:"80%"},on:{"update:visible":function(t){return e.$set(e.returnBefore,"display",t)}}},[n("span",[n("p",[e._v("输入登录时预设的重生口令，你可以将之前账号的数据完全同步过来。")]),n("p",[e._v("将会参与同步的数据有：帖子、评论")]),n("p",[e._v("如果决定好了，请告诉我你之前的名字和重生口令...")]),n("el-input",{attrs:{placeholder:"你之前的名字是什么？",size:"mini"},model:{value:e.returnBefore.name,callback:function(t){e.$set(e.returnBefore,"name",t)},expression:"returnBefore.name"}}),n("el-input",{staticStyle:{"margin-top":"5px"},attrs:{placeholder:"安巴尼妈咪哄",size:"mini"},model:{value:e.returnBefore.password,callback:function(t){e.$set(e.returnBefore,"password",t)},expression:"returnBefore.password"}})],1),n("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{on:{click:function(t){e.returnBefore.display=!1}}},[e._v("取 消")]),n("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.commitReturnBefore()}}},[e._v("确 定")])],1)])],2)},a=[],s=(n("7f7f"),{name:"me",components:{},data:function(){return{screenLoading:!1,list:[],page:1,nomore:!1,me:{count:0,name:""},reborn:{display:!1},returnBefore:{display:!1,name:"",password:"",loading:!1},canReturnBefore:!0,playing:{isPlaying:!1,mid:0,audioObj:{},length:1,played:0,playInterval:{}}}},mounted:function(){this.$checkUser(),this.me.name=this.$store.state.user.name,this.getMomentCount(),this.getMomentList(),this.canReturnBefore=1!=localStorage.getItem("canreturnbefore.night.xtzero.me"),this.playing.audioObj=new Audio},methods:{play:function(e,t){var n=this;if(this.playing.isPlaying)return this.$message({message:"正在播放其他音频",type:"error"}),!1;this.playing.audioObj.src=e.content,this.playing.mid=e.id,this.playing.audioObj.addEventListener("canplay",function(){n.playing.isPlaying=!0,n.playing.audioObj.play(),n.list[t].length=n.playing.audioObj.duration,n.playing.playInterval=setInterval(function(){n.list[t].played=n.playing.audioObj.currentTime},1e3),setTimeout(function(){n.playing.audioObj.src="",n.playing.isPlaying=!1,clearInterval(n.playing.playInterval)},1e3*(n.playing.audioObj.duration-0+1))})},stop:function(){this.playing.audioObj.pause(),this.playing.mid=0,this.playing.isPlaying=!1,clearInterval(this.playing.playInterval)},getMomentCount:function(){var e=this;this.screenLoading=!0,this.$utils.ajax("momentCount",{userid:this.$store.state.user.id}).then(function(t){e.screenLoading=!1,200===t.data.code?e.me.count=t.data.data.count:e.$notify({type:"error",message:t.data.msg})})},getMomentList:function(e){var t,n=this;t=e?this.page+1:this.page,this.screenLoading=!0,this.$utils.ajax("listMoment",{page:t,userid:this.$store.state.user.id}).then(function(t){if(n.screenLoading=!1,200==t.data.code){var i=t.data.data;for(var a in i)"voice"===i[a].type&&(i[a].length=1,i[a].played=0),n.list.push(i[a]);e&&n.page++}else"没有更多数据了"==t.data.msg?n.nomore=!0:n.$notify({type:"error",message:t.data.msg})})},formatTime:function(e){return this.$utils.formatTime(e)},nextPage:function(){this.getMomentList(!0)},reload:function(){this.list=[],this.page=1,this.nomore=!1,this.getMomentList()},showRebornDialog:function(){this.reborn.display=!0},showReturnBeforeDialog:function(){this.returnBefore.display=!0},commitReborn:function(){"确认转世"===prompt("如果真的想好要进行转世，并且已经准备好失去当前账号的全部数据，请在下方输入「确认转世」。成功后页面将刷新，你将会重新进入注册流程。","","请确认")?(localStorage.removeItem("userid.night.xtzero.me"),localStorage.removeItem("name.night.xtzero.me"),this.$store.state.user.id="",this.$store.state.user.name="",window.location.reload()):this.$message({type:error,message:"请做好充足准备再来"})},commitReturnBefore:function(){var e=this;return this.returnBefore.name?this.returnBefore.password?void("确认重生"===prompt("请在下方输入「确认重生」，来表明这个操作是经过了你的深思熟虑。","","请确认")&&confirm("请再次确认，是否真的要进行重生操作。重生后之前账号的数据将不复存在，全部的帖子、评论数据都将同步到当前账号。而且当前设备将在一段时间内禁止使用重生功能。这是最后一次确认，如果一切都确认完毕，请点击确认。")?(this.returnBefore.loading=!0,this.$utils.ajax("returnBefore",{password:this.returnBefore.password,name:this.returnBefore.name,userid:this.$store.state.user.id}).then(function(t){e.returnBefore.loading=!1,200===t.data.code?(localStorage.setItem("canreturnbefore.night.xtzero.me",1),alert("重生成功，点击确定后重新进入"),window.location.reload()):e.$message({type:"error",message:t.data.msg})}).catch(function(){e.returnBefore.loading=!1,e.$message({type:"error",message:"重生时出现问题"})})):this.$message({type:"erorr",message:"请深思熟虑之后再来"})):(this.$message({type:"error",message:"请输入重生口令"}),!1):(this.$message({type:"error",message:"请输入名字"}),!1)},commitDelete:function(e){alert("要删除啦~但是我还没做这个功能。要是发了什么不得了的东西，就先忘掉它吧~")}},computed:{}}),r=s,o=(n("4f01"),n("2877")),l=Object(o["a"])(r,i,a,!1,null,null,null);t["default"]=l.exports},"4f01":function(e,t,n){"use strict";var i=n("d5f1"),a=n.n(i);a.a},"7f7f":function(e,t,n){var i=n("86cc").f,a=Function.prototype,s=/^\s*function ([^ (]*)/,r="name";r in a||n("9e1e")&&i(a,r,{configurable:!0,get:function(){try{return(""+this).match(s)[1]}catch(e){return""}}})},d5f1:function(e,t,n){}}]);
//# sourceMappingURL=chunk-f73e891c.28a78208.js.map