(function(e){function t(t){for(var n,i,r=t[0],l=t[1],c=t[2],d=0,u=[];d<r.length;d++)i=r[d],s[i]&&u.push(s[i][0]),s[i]=0;for(n in l)Object.prototype.hasOwnProperty.call(l,n)&&(e[n]=l[n]);p&&p(t);while(u.length)u.shift()();return o.push.apply(o,c||[]),a()}function a(){for(var e,t=0;t<o.length;t++){for(var a=o[t],n=!0,i=1;i<a.length;i++){var r=a[i];0!==s[r]&&(n=!1)}n&&(o.splice(t--,1),e=l(l.s=a[0]))}return e}var n={},i={app:0},s={app:0},o=[];function r(e){return l.p+"js/"+({}[e]||e)+"."+{"chunk-45775c53":"4889ff9e","chunk-45979ec8":"640e7ff1","chunk-f73e891c":"28a78208"}[e]+".js"}function l(t){if(n[t])return n[t].exports;var a=n[t]={i:t,l:!1,exports:{}};return e[t].call(a.exports,a,a.exports,l),a.l=!0,a.exports}l.e=function(e){var t=[],a={"chunk-45775c53":1,"chunk-45979ec8":1,"chunk-f73e891c":1};i[e]?t.push(i[e]):0!==i[e]&&a[e]&&t.push(i[e]=new Promise(function(t,a){for(var n="css/"+({}[e]||e)+"."+{"chunk-45775c53":"27d594df","chunk-45979ec8":"6c225718","chunk-f73e891c":"280befcb"}[e]+".css",s=l.p+n,o=document.getElementsByTagName("link"),r=0;r<o.length;r++){var c=o[r],d=c.getAttribute("data-href")||c.getAttribute("href");if("stylesheet"===c.rel&&(d===n||d===s))return t()}var u=document.getElementsByTagName("style");for(r=0;r<u.length;r++){c=u[r],d=c.getAttribute("data-href");if(d===n||d===s)return t()}var p=document.createElement("link");p.rel="stylesheet",p.type="text/css",p.onload=t,p.onerror=function(t){var n=t&&t.target&&t.target.src||s,o=new Error("Loading CSS chunk "+e+" failed.\n("+n+")");o.code="CSS_CHUNK_LOAD_FAILED",o.request=n,delete i[e],p.parentNode.removeChild(p),a(o)},p.href=s;var m=document.getElementsByTagName("head")[0];m.appendChild(p)}).then(function(){i[e]=0}));var n=s[e];if(0!==n)if(n)t.push(n[2]);else{var o=new Promise(function(t,a){n=s[e]=[t,a]});t.push(n[2]=o);var c,d=document.createElement("script");d.charset="utf-8",d.timeout=120,l.nc&&d.setAttribute("nonce",l.nc),d.src=r(e),c=function(t){d.onerror=d.onload=null,clearTimeout(u);var a=s[e];if(0!==a){if(a){var n=t&&("load"===t.type?"missing":t.type),i=t&&t.target&&t.target.src,o=new Error("Loading chunk "+e+" failed.\n("+n+": "+i+")");o.type=n,o.request=i,a[1](o)}s[e]=void 0}};var u=setTimeout(function(){c({type:"timeout",target:d})},12e4);d.onerror=d.onload=c,document.head.appendChild(d)}return Promise.all(t)},l.m=e,l.c=n,l.d=function(e,t,a){l.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},l.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},l.t=function(e,t){if(1&t&&(e=l(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(l.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)l.d(a,n,function(t){return e[t]}.bind(null,n));return a},l.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return l.d(t,"a",t),t},l.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},l.p="/",l.oe=function(e){throw console.error(e),e};var c=window["webpackJsonp"]=window["webpackJsonp"]||[],d=c.push.bind(c);c.push=t,c=c.slice();for(var u=0;u<c.length;u++)t(c[u]);var p=d;o.push([0,"chunk-vendors"]),a()})({0:function(e,t,a){e.exports=a("56d7")},"034f":function(e,t,a){"use strict";var n=a("64a9"),i=a.n(n);i.a},"56d7":function(e,t,a){"use strict";a.r(t);a("96cf");var n=a("3b8d"),i=(a("cadf"),a("551c"),a("f751"),a("097d"),a("2b0e")),s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"app"}},[e.is_login?a("el-container",{staticClass:"container"},[a("el-header",{staticStyle:{height:"0px"}}),a("el-main",{staticClass:"body"},[a("router-view")],1),a("el-footer",{staticClass:"footer"},[a("span",[a("router-link",{staticClass:"el-icon-chat-line-round",attrs:{to:"/"}},[e._v(" 表态")])],1),a("el-divider",{attrs:{direction:"vertical"}}),a("span",[a("router-link",{staticClass:"el-icon-smoking",attrs:{to:"/smoking"}},[e._v(" 吸烟区")])],1),a("el-divider",{attrs:{direction:"vertical"}}),a("span",[a("router-link",{staticClass:"el-icon-mobile-phone",attrs:{to:"/me"}},[e._v(" 自己")])],1)],1)],1):a("router-view")],1)},o=[],r={name:"app",components:{},mounted:function(){this.$checkUser(),this.$router.push("/login")},computed:{is_login:function(){var e=this.$store.state.user.id;return!!e}}},l=r,c=(a("034f"),a("2877")),d=Object(c["a"])(l,s,o,!1,null,null,null),u=d.exports,p=a("8c4f"),m=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.screenLoading,expression:"screenLoading"}],staticClass:"home"},[a("el-card",{staticClass:"box-card first-card"},[a("el-col",{attrs:{span:20}},[a("div",{staticClass:"notice-title"},[e._v("表态")]),a("div",{staticClass:"notice-content"},[e._v("你为什么睡不着")])]),a("el-col",{staticClass:"first-card-col-right",attrs:{span:4}},[a("el-button",{attrs:{icon:"el-icon-edit",type:"primary",circle:""},on:{click:function(t){e.send.display=!0}}})],1)],1),a("el-card",{staticClass:"box-card first-card"},[a("el-col",{attrs:{span:20}},[a("div",{staticClass:"notice-title"},[e._v("呐喊")]),a("div",{staticClass:"notice-content"},[e._v("你觉得这世界如何")])]),a("el-col",{staticClass:"first-card-col-right",attrs:{span:4}},[a("el-button",{attrs:{icon:"el-icon-microphone",type:"primary",circle:""},on:{click:function(t){e.sendVoice.display=!0}}})],1)],1),e._l(e.list,function(t,n){return a("el-card",{staticClass:"box-card"},["normal"===t.type?a("div",{on:{click:function(a){return e.showDetail(t)}}},[e._v("\n        "+e._s(t.content)+"\n      ")]):"voice"===t.type?a("div",[a("el-row",[a("el-col",{attrs:{span:3}},[a("i",{directives:[{name:"show",rawName:"v-show",value:e.playing.mid!=t.id,expression:"playing.mid!=v.id"}],staticClass:"el-icon-video-play",on:{click:function(a){return e.play(t,n)}}}),a("i",{directives:[{name:"show",rawName:"v-show",value:e.playing.mid==t.id,expression:"playing.mid==v.id"}],staticClass:"el-icon-circle-close",on:{click:e.stop}})]),a("el-col",{attrs:{span:19}},[a("el-progress",{attrs:{"text-inside":!0,"stroke-width":26,percentage:e.playing.mid===t.id?Math.round(t.played)/Math.round(t.length)*100:0,"show-text":!1}})],1)],1)],1):e._e(),a("p",{staticClass:"time",on:{click:function(a){return e.showDetail(t)}}},[e._v("\n        "+e._s(e.zipName(t.name))+" 于 "+e._s(t.create_at)+"\n        "),"normal"===t.type?a("span",[e._v(" 发送")]):"voice"===t.type?a("span",[e._v(" 呐喊")]):e._e(),a("br"),a("span",{staticClass:"el-icon-chat-dot-round"},[e._v(e._s(t.c_count?t.c_count:0))]),a("el-divider",{attrs:{direction:"vertical"}}),a("span",{staticClass:"el-icon-sunny"},[e._v(e._s(t.star?t.star:0))]),a("el-divider",{attrs:{direction:"vertical"}}),a("span",{staticClass:"el-icon-heavy-rain"},[e._v(e._s(t.shit?t.shit:0))])],1)])}),a("el-card",{directives:[{name:"show",rawName:"v-show",value:!e.nomore,expression:"!nomore"}],staticClass:"box-card",staticStyle:{"text-align":"center","font-size":"13px",padding:"0"}},[a("span",{on:{click:e.nextPage}},[e._v("\n\t\t\t\t下一页\n\t\t\t")])]),a("el-card",{directives:[{name:"show",rawName:"v-show",value:e.nomore,expression:"nomore"}],staticClass:"box-card",staticStyle:{"text-align":"center","font-size":"13px",padding:"0"}},[a("span",{on:{click:e.reload}},[e._v("\n\t\t\t\t没有更多了，点击重新加载\n\t\t\t")])]),a("el-dialog",{directives:[{name:"loading",rawName:"v-loading",value:e.send.loading,expression:"send.loading"}],attrs:{title:"想要表态",visible:e.send.display,width:"100%"},on:{"update:visible":function(t){return e.$set(e.send,"display",t)}}},[a("el-form",[a("el-form-item",{attrs:{"label-width":"0"}},[a("el-input",{attrs:{rows:10,type:"textarea",placeholder:"请输入内容",autosize:{minRows:5,maxRows:10}},model:{value:e.send.data.content,callback:function(t){e.$set(e.send.data,"content",t)},expression:"send.data.content"}}),this.send.data.content.length>100?a("span",{staticStyle:{color:"red"}},[e._v("\n            剩余字数 "+e._s(this.send.data.content.length)+" / 100\n          ")]):a("span",[e._v("\n            剩余字数 "+e._s(this.send.data.content.length)+" / 100\n          ")])],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary",disabled:this.send.data.content.length>100},on:{click:e.sendMoment}},[e._v("表态！")])],1)],1),a("el-dialog",{directives:[{name:"loading",rawName:"v-loading",value:e.sendVoice.loading,expression:"sendVoice.loading"}],attrs:{title:"那就呐喊",visible:e.sendVoice.display,width:"100%"},on:{"update:visible":function(t){return e.$set(e.sendVoice,"display",t)}}},[a("el-form",[a("el-form-item",{attrs:{"label-width":"0"}},[a("p",{directives:[{name:"show",rawName:"v-show",value:e.sendVoice.speaking&&!e.sendVoice.spoken,expression:"sendVoice.speaking && !sendVoice.spoken"}]},[a("i",{staticClass:"el-icon-loading"}),e._v(" 我在听。")]),a("p",{directives:[{name:"show",rawName:"v-show",value:!e.sendVoice.speaking&&!e.sendVoice.spoken,expression:"!sendVoice.speaking && !sendVoice.spoken"}]},[a("i",{staticClass:"el-icon-ice-cream-round"}),e._v(" 请点击「讲」")]),a("p",{directives:[{name:"show",rawName:"v-show",value:!e.sendVoice.speaking&&e.sendVoice.spoken,expression:"!sendVoice.speaking && sendVoice.spoken"}]},[a("i",{staticClass:"el-icon-cold-drink"}),e._v(" 点击「听」来重审自我。")]),a("p",{directives:[{name:"show",rawName:"v-show",value:!e.sendVoice.speaking&&e.sendVoice.spoken,expression:"!sendVoice.speaking && sendVoice.spoken"}]},[a("i",{staticClass:"el-icon-dessert"}),e._v(" 点击「呐喊」来告知全世界")])])],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{directives:[{name:"show",rawName:"v-show",value:!e.sendVoice.speaking,expression:"!sendVoice.speaking"}],attrs:{type:"primary",icon:"el-icon-mic"},on:{click:e.record}},[e._v("讲")]),a("el-button",{directives:[{name:"show",rawName:"v-show",value:e.sendVoice.speaking,expression:"sendVoice.speaking"}],attrs:{type:"primary",icon:"el-icon-mic"},on:{click:e.record}},[e._v("讲毕")]),a("el-button",{directives:[{name:"show",rawName:"v-show",value:!e.sendVoice.speaking&&e.sendVoice.spoken,expression:"!sendVoice.speaking && sendVoice.spoken"}],attrs:{type:"primary",disabled:e.sendVoice.listening,icon:"el-icon-headset"},on:{click:e.reply}},[e._v("听")]),a("el-button",{directives:[{name:"show",rawName:"v-show",value:e.sendVoice.spoken,expression:"sendVoice.spoken"},{name:"loading",rawName:"v-loading",value:e.sendVoice.uploading,expression:"sendVoice.uploading"}],attrs:{type:"primary"},on:{click:e.uploadVoice}},[e._v("呐喊！")])],1)],1),a("el-dialog",{directives:[{name:"loading",rawName:"v-loading",value:e.detail.loading,expression:"detail.loading"}],attrs:{visible:e.detail.display,fullscreen:!0},on:{"update:visible":function(t){return e.$set(e.detail,"display",t)}}},[a("h3",[a("i",{staticClass:"el-icon-sugar",staticStyle:{"font-size":"20px"}}),e._v(" "+e._s(e.zipName(e.detail.data.name))+"\n        "),"normal"==e.detail.data.type?a("span",[e._v(" 说：")]):"voice"==e.detail.data.type?a("span",[e._v(" 曾经呐喊")]):e._e()]),"normal"==e.detail.data.type?a("span",{staticClass:"detail-content"},[e._v(e._s(e.detail.data.content))]):e._e(),a("p",{staticClass:"time",staticStyle:{"margin-bottom":"30px"}},[e._v(e._s(e.detail.data.create_at))]),a("div",{staticClass:"block"},[a("el-row",{staticStyle:{display:"flex","flex-direction":"row","justify-content":"space-between",width:"100%"}},[a("el-col",{staticStyle:{"text-align":"left"},attrs:{span:6}},[a("i",{staticClass:"el-icon-sunny"}),e._v(" "+e._s(e.detail.data.star)+"\n          ")]),a("el-col",{staticStyle:{"text-align":"center","font-size":"10px"},attrs:{span:12}},[e._v(e._s(e.sosTip))]),a("el-col",{staticStyle:{"text-align":"right"},attrs:{span:6}},[e._v("\n            "+e._s(e.detail.data.shit)+" "),a("i",{staticClass:"el-icon-heavy-rain"})])],1),a("el-slider",{attrs:{"show-tooltip":!1},on:{change:e.onSosChange},model:{value:e.detail.sos,callback:function(t){e.$set(e.detail,"sos",t)},expression:"detail.sos"}})],1),e.hasComments?a("el-divider",{staticClass:"others-say-divider"},[e._v("其他人说")]):a("el-divider",{staticClass:"others-say-divider"},[e._v("其他人啥都没说")]),a("el-card",{staticClass:"detail-box-card"},[a("div",{staticClass:"text item",staticStyle:{"text-align":"center"}},[e.hasComments?a("span",{staticClass:"el-icon-thumb",on:{click:e.showCommentDialog}},[e._v(" 加入 「其他人」")]):a("span",{staticClass:"el-icon-thumb",on:{click:e.showCommentDialog}},[e._v(" 我先说点啥")])])]),e._l(e.detail.data.comments,function(t){return a("el-card",{directives:[{name:"show",rawName:"v-show",value:e.hasComments,expression:"hasComments"}],staticClass:"detail-box-card"},[a("span",[e._v(e._s(e.zipName(t.name))+" :")]),a("div",{staticClass:"text item"},[e._v("\n          "+e._s(t.content)+"\n        ")])])}),e.hasComments?a("el-divider",{staticClass:"others-say-divider"},[e._v("其他人说完了")]):e._e(),a("el-dialog",{directives:[{name:"loading",rawName:"v-loading",value:e.detail.comment.loading,expression:"detail.comment.loading"}],attrs:{title:"想要表态",visible:e.detail.comment.display,width:"100%","append-to-body":""},on:{"update:visible":function(t){return e.$set(e.detail.comment,"display",t)}}},[a("el-form",[a("el-form-item",{attrs:{"label-width":"0"}},[a("el-input",{attrs:{rows:10,type:"textarea",placeholder:"请输入内容",autosize:{minRows:5,maxRows:10}},model:{value:e.detail.comment.data.content,callback:function(t){e.$set(e.detail.comment.data,"content",t)},expression:"detail.comment.data.content"}}),e.detail.comment.data.content.length>50?a("span",{staticStyle:{color:"red"}},[e._v("\n            剩余字数 "+e._s(e.detail.comment.data.content.length)+" / 50\n          ")]):a("span",[e._v("\n            剩余字数 "+e._s(e.detail.comment.data.content.length)+" / 50\n          ")])],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary",disabled:e.detail.comment.data.content.length>30},on:{click:e.sendComment}},[e._v("表态！")])],1)],1)],2)],2)},h=[],g=a("da43"),v=a.n(g),f={name:"home",components:{},data:function(){return{screenLoading:!1,list:[],page:1,nomore:!1,send:{loading:!1,display:!1,data:{content:""}},sendVoice:{display:!1,loading:!1,speaking:!1,spoken:!1,listening:!1,uploading:!1,url:""},detail:{loading:!1,display:!1,sos:0,data:{comments:[],shit:0,star:0},comment:{display:!1,data:{content:""},loading:!1}},isRecording:!1,recorder:{},playing:{isPlaying:!1,mid:0,audioObj:{},length:1,played:0,playInterval:{}}}},mounted:function(){this.$checkUser(),this.getMomentList(),this.recorder=new v.a,this.playing.audioObj=new Audio},methods:{play:function(e,t){var a=this;if(this.playing.isPlaying)return this.$message({message:"正在播放其他音频",type:"error"}),!1;this.playing.audioObj.src=e.content,this.playing.mid=e.id,this.playing.audioObj.addEventListener("canplay",function(){a.playing.isPlaying=!0,a.playing.audioObj.play(),a.list[t].length=a.playing.audioObj.duration,a.playing.playInterval=setInterval(function(){a.list[t].played=a.playing.audioObj.currentTime},1e3),setTimeout(function(){a.playing.audioObj.src="",a.playing.isPlaying=!1,clearInterval(a.playing.playInterval)},1e3*(a.playing.audioObj.duration-0+1))})},stop:function(){this.playing.audioObj.pause(),this.playing.mid=0,this.playing.isPlaying=!1,clearInterval(this.playing.playInterval)},record:function(){this.isRecording?(this.sendVoice.speaking=!1,this.sendVoice.spoken=!0,this.recorder.stop()):(this.sendVoice.speaking=!0,this.sendVoice.spoken=!1,this.recorder.start()),this.isRecording=!this.isRecording},reply:function(){var e=this;this.sendVoice.listening=!0,this.recorder.play(),setTimeout(function(){e.sendVoice.listening=!1},2e3)},uploadVoice:function(){var e=this;this.sendVoice.uploading=!0;var t=new Blob([this.recorder.getWAV()],{type:"audio/wav"}),a=new XMLHttpRequest;a.open("POST","http://nightapi.xtzero.me/index.php/upload",!0),a.onload=function(t){e.sendVoice.uploading=!1,e.sendVoice.display=!1;var a=JSON.parse(t.currentTarget.responseText);if(200===a.code){var n="http://nightvoice.xtzero.me/"+a.data.url;e.sendVoice.url=n,e.$utils.ajax("sendMoment",{userid:e.$store.state.user.id,content:e.sendVoice.url,type:"voice"}).then(function(t){e.screenLoading=!1,e.send.data.content="",e.send.display=!1,e.reload()})}else e.$message({message:a.msg,type:error})},a.onerror=function(){e.sendVoice.uploading=!1,e.sendVoice.display=!1,e.$message({message:"语音消息上传错误",type:error})};var n=new FormData,i=new window.File([t],"123");n.append("file",i),a.send(n)},getMomentList:function(e){var t,a=this;t=e?this.page+1:this.page,this.screenLoading=!0,this.$utils.ajax("listMoment",{page:t}).then(function(t){if(a.screenLoading=!1,200===t.data.code){var n=t.data.data;for(var i in n)"voice"===n[i].type&&(n[i].length=1,n[i].played=0),a.list.push(n[i]);e&&a.page++}else"没有更多数据了"==t.data.msg?(a.$message({type:"error",message:t.data.msg}),a.nomore=!0):a.$message({type:"error",message:t.data.msg})})},formatTime:function(e){return this.$utils.formatTime(e)},nextPage:function(){this.getMomentList(!0)},reload:function(){this.list=[],this.page=1,this.nomore=!1,this.getMomentList()},sendMoment:function(){var e=this;this.screenLoading=!0,this.$utils.ajax("sendMoment",{userid:this.$store.state.user.id,content:this.send.data.content}).then(function(t){e.screenLoading=!1,e.send.data.content="",e.send.display=!1,e.reload()})},showDetail:function(e){var t=this;this.screenLoading=!0,this.$utils.ajax("momentDetail",{mid:e.id}).then(function(e){t.screenLoading=!1,200===e.data.code?(t.detail.display=!0,t.detail.data=e.data.data,t.detail.sos=t.sosOriValue(),console.log(t.detail.data)):t.$message({type:"error",message:e.data.msg})})},onSosChange:function(e){0===e?this.shit():100===e?this.star():this.detail.sos=this.sosOriValue()},sosOriValue:function(){var e=this.detail.data.shit,t=this.detail.data.star,a=t-e+50;return a},star:function(){var e=this;this.detail.loading=!0,this.$utils.ajax("starOrShit",{mid:this.detail.data.id,sos:"star"}).then(function(t){e.detail.loading=!1,200===t.data.code?(e.showDetail({id:e.detail.data.id}),e.$message({type:"success",message:"点赞成功！",showClose:!0})):e.$message({type:"error",message:t.data.msg,showClose:!0})}).catch(function(t){e.detail.data.sos=e.sosOriValue()})},shit:function(){var e=this;this.detail.loading=!0,this.$utils.ajax("starOrShit",{mid:this.detail.data.id,sos:"shit"}).then(function(t){e.detail.loading=!1,200===t.data.code?(e.showDetail({id:e.detail.data.id}),e.$message({type:"success",message:"点踩成功！",showClose:!0})):e.$message({type:"error",message:t.data.msg,showClose:!0})}).catch(function(t){e.detail.data.sos=e.sosOriValue()})},showCommentDialog:function(){this.detail.comment.display=!0},sendComment:function(){var e=this;this.detail.comment.loading=!0,this.$utils.ajax("sendComment",{mid:this.detail.data.id,userid:this.$store.state.user.id,content:this.detail.comment.data.content}).then(function(t){e.detail.comment.loading=!1,200===t.data.code?(e.detail.comment.display=!1,e.detail.comment.data.content="",e.showDetail({id:e.detail.data.id})):e.$message({type:"error",message:t.data.msg})})},zipName:function(e){return e&&e.length>8?e.substring(0,8)+"...":e}},computed:{hasComments:function(){return this.detail.data.comments.length>0},sosTip:function(){return this.detail.sos==this.sosOriValue()?"拖动滑块来表态":this.detail.sos<this.sosOriValue()&&this.detail.sos>0?"拖到最左表示反对":this.detail.sos>this.sosOriValue()&&this.detail.sos<100?"拖到最右表示赞同":100==this.detail.sos?"松手表示赞同":0==this.detail.sos?"松手表示反对":void 0}}},y=f,w=(a("cccb"),Object(c["a"])(y,m,h,!1,null,null,null)),b=w.exports;i["default"].use(p["a"]);var _=new p["a"]({routes:[{path:"/",name:"home",meta:"表态",component:b},{path:"/smoking",name:"smoking",meta:"吸烟区",component:function(){return a.e("chunk-45775c53").then(a.bind(null,"1a21"))}},{path:"/me",name:"me",meta:"自己",component:function(){return a.e("chunk-f73e891c").then(a.bind(null,"0a99"))}},{path:"/login",name:"login",meta:"登录",component:function(){return a.e("chunk-45979ec8").then(a.bind(null,"a55b"))}}]}),k=a("2f62");i["default"].use(k["a"]);var x=new k["a"].Store({state:{user:{id:"",name:""}},mutations:{},actions:{}}),C=a("5c96"),V=a.n(C);a("c69f");i["default"].use(V.a);var $=a("bc3a"),O=a.n($),j="http://nightapi.xtzero.me/index.php/";function S(e,t){var a=[];for(var n in t)a.push(n+"="+t[n]);var i=j+e+"?"+a.join("&");return O.a.get(i)}function N(e,t){return parseInt(Math.random()*(t-e+1)+e,10)}function L(e,t){var a=new Date(e).getTime()/1e3,n=new Date(1e3*a),i=n.getFullYear(),s=n.getMonth()+1,o=n.getDate(),r=n.getHours(),l=n.getMinutes();if(1==t)return l>=0&&l<=9&&(l="0"+l),i+"-"+s+"-"+o+" "+r+":"+l;var c=new Date;return i==c.getFullYear()?i="":i==c.getFullYear()-1?i="去年 ":i+="年",s==c.getMonth()+1?s="":s+="月",o==c.getDate()?o="今天 ":o==c.getDate()-1?o="昨天":(""==s&&(s="本月 "),o+="号 "),r<10&&(r="0"+r),l<10&&(l="0"+l),i+s+o+r+":"+l}i["default"].config.productionTip=!1;var M={ajax:S,rand:N,formatTime:L};i["default"].prototype.$utils=M,i["default"].prototype.$checkUser=function(){var e=this,t=localStorage.getItem("userid.night.xtzero.me"),a=localStorage.getItem("name.night.xtzero.me");t?(this.$store.state.user.id=t,this.$store.state.user.name=a,M.ajax("checkUser",{userid:t}).then(function(t){200!=t.data.code&&e.$router.push("/login")}).catch(function(e){i["default"].prototype.$message({type:"error",message:"检查用户时出现错误"})})):this.$router.push("/login")},new i["default"]({router:_,store:x,render:function(e){return e(u)}}).$mount("#app"),_.beforeEach(function(){var e=Object(n["a"])(regeneratorRuntime.mark(function e(t,a,n){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:document.title=t.meta,n();case 2:case"end":return e.stop()}},e)}));return function(t,a,n){return e.apply(this,arguments)}}())},"64a9":function(e,t,a){},c69f:function(e,t,a){},cccb:function(e,t,a){"use strict";var n=a("d563"),i=a.n(n);i.a},d563:function(e,t,a){}});
//# sourceMappingURL=app.e3a4384d.js.map